{{ partial "header.html" . }}

{{ if (and (.Site.Params.facebookPage) (.Site.Params.facebookAppId)) }}
<script>
    window.fbAsyncInit = function() {
        FB.init({
            appId            : '{{ .Site.Params.facebookAppId }}',
            autoLogAppEvents : true,
            xfbml            : true,
            version          : 'v15.0'
        });
    };
</script>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js"></script>
{{ end }}

{{ $newposts := (where (where .Site.RegularPages "Type" "event") "Date" ">=" now) }}

{{ if $newposts }}

    {{ range $index, $element := $newposts }}

        {{ if eq $index 0 }}

            <article class="article">

                <header data-interchange="[{{ (print .Params.banner "-small" ".jpg") | absURL }}, small], [{{ (print .Params.banner "-medium" ".jpg") | absURL }}, medium], [{{ (print .Params.banner "-large" ".jpg") | absURL }}, large]" class="article-banner" itemprop="image" title="{{ .Title }}" alt="{{ .Title }}">

                <div class="row columns small-up-2 medium-up-3 large-up-4">
                    <h1 class="article-title">
                        <a href="{{ .Permalink }}" itemprop="url">
                            
                            {{ .Title }}
                        </a>
                    </h1>
                </div>

                </header>

                <div class="row columns small-up-2 medium-up-3 large-up-4">

                    <div class="media-object">
                        <div class="media-object-section">
                            <div class="thumbnail">
                                <a href="{{ .Permalink }}" itemprop="url">
                                    <img src="{{ .Site.BaseURL }}images/project/{{ .Params.project }}/icon.png" itemprop="image" title="{{ .Title }}" alt="{{ .Title }}">
                                </a>
                            </div>
                        </div>
                        <div class="media-object-section">
                            <p><strong>{{ dateFormat "January 2, 2006 at 3:04pm" .Date }}</strong></p>

                            <p class="article-style">
                                {{ if .Truncated }}
                                {{ .Summary }}
                                {{ else }}
                                {{ .Content }}
                                {{ end }}
                            </p>
                            <p class="read-more">
                                <strong><a href="{{ .Permalink }}">
                                    Get the deets...
                                </a></strong>
                            </p>
                        </div>
                    </div>


                </div>
            </article>
        {{ else }}

            {{ if eq $index 1 }}

                <div class="row">
                    <div id="upcoming" class="large-12 columns">

                <h3>Other Upcoming Events</h3>

            {{ end }}

            <div class="media-object">
                <div class="media-object-section">
                    <div class="thumbnail">
                        <a href="{{ .Permalink }}" itemprop="url">
                            <img src="{{ .Site.BaseURL }}images/project/{{ .Params.project }}/icon.png" itemprop="image" title="{{ .Title }}" alt="{{ .Title }}">
                        </a>
                    </div>
                </div>
                <div class="media-object-section">
                    <h5 class="article-title">
                        <a href="{{ .Permalink }}" itemprop="url">
                            {{ .Title }}
                        </a>
                    </h5>

                    <p><strong>{{ dateFormat "January 2, 2006 at 3:04pm" .Date }}</strong></p>

                    <p class="article-style">
                        {{ if .Truncated }}
                        {{ .Summary }}
                        {{ else }}
                        {{ .Content }}
                        {{ end }}
                    </p>
                    <p class="read-more">
                        <strong><a href="{{ .Permalink }}">
                            Get the deets...
                        </a></strong>
                    </p>
                </div>
            </div>

        {{ end }}

    {{ end }}

    {{ if gt (len $newposts) 1 }}
                    </div>
                </div>
    {{ end }}

{{ else }}

    {{ range first 1 (where .Site.RegularPages "Type" "event") }}

    <div class="container pt-5">
        <div class="row">
          <div class="col-12">
            <article class="article">
              <header class="article-banner" itemprop="image" title="Creative Computing Fall 2023" alt="Creative Computing Fall 2023" style="font-size: 1.5rem;">
                <h1 class="text-center" style="font-size: 2.5rem; margin-bottom: 20px;">
                  <div class="text-center">
                        <a href="{{ .Permalink }}" itemprop="url">
                            {{ .Title }}
                        </a>
                    </div>
                    </h1>
                </header>
                <div class="container">
                    <div class="row">
                      <div class="col-md-6 col-sm-12 d-flex justify-content-center">
                            <a href="{{ .Permalink }}" itemprop="url">
                                <img src="{{ .Site.BaseURL }}images/project/{{ .Params.project }}/icon.png" itemprop="image" title="{{ .Title }}" alt="{{ .Title }}" class="mx-auto">
                            </a>
                        </div>
                    <div class="col-md-6 col-sm-12">
                        <p><strong>{{ dateFormat "January 2, 2006 at 3:04pm" .Date }}</strong></p>

                        <p class="article-style">
                            {{ if .Truncated }}
                            {{ .Summary }}
                            {{ else }}
                            {{ .Content }}
                            {{ end }}
                        </p>
                        <p class="read-more">
                            <strong><a href="{{ .Permalink }}">
                                Get the deets...
                            </a></strong>
                        </p>
                    </div>
                </div>
            </div>
        </article>
        </div>
    </div>
</div>

{{ end }}
{{ end }}

<div class="container">
    <div class="row">
        <div class="col-lg-6">
            <div class="card border-primary mb-3">
                <div class="card-header bg-primary text-white">
                    <h3 class="card-title">
                        Past Events (Sampling)
                    </h3>
                </div>
                <div class="card-body">
                    <div class="d-flex">
                        <ul class="list-unstyled ">
                            {{ range first 8 (where (where .Site.RegularPages "Type" "event") "Date" "<" now) }}
                            <li class="d-flex algin-items-center mb-4">
                                <a href="{{ .Permalink }}" itemprop="url">
                                    <img src="{{ .Site.BaseURL }}images/project/{{ .Params.project }}/icon.png" itemprop="image" title="{{ .Title }}" alt="{{ .Title }}" style="max-width: 100px; max-height: 100px;" class="me-3">
                                </a>
                                <div class="flex-grow-1">
                                    <h5 class="article-title text-center">
                                        <a href="{{ .Permalink }}" itemprop="url">
                                            {{ .Title }}
                                        </a>
                                    </h5>
                                </div>
                            </li>
                        {{ end }}
                        </ul>
                        <p class="text-right">
                            <a href="/event/" class="button">View All</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="card border-light mb-3">
                {{ if (and (.Site.Params.facebookPage) (.Site.Params.facebookAppId)) }}
                <div class="card-header bg-light text-white">
                    <h3 class="card-title">
                        In Action
                    </h3>
                </div>
                <div class="card-body">
                    <div class="fb-page" data-href="https://www.facebook.com/{{ .Site.Params.facebookPage }}/" data-tabs="timeline,events" data-small-header="true" data-adapt-container-width="true" data-hide-cover="true" data-width="500" data-height="760" data-show-facepile="false"><blockquote cite="https://www.facebook.com/RefreshAnnapolisValley/" class="fb-xfbml-parse-ignore"><a href="https://www.facebook.com/RefreshAnnapolisValley/">Refresh Annapolis Valley</a></blockquote></div>
                </div>
            </div>
            {{ end }}

        </div>
    </div>
</div>

<div class="container mt-3">
    <div class="row">
        <div class="col-12">
            <div class="card border-info mb-3">
                <div class="card-header bg-info text-white">
                    <h4>Topics</h4>
                </div>
                <div class="card-body">
                    <div class="d-flex flex-wrap justify-content-start">
                        {{ $data := .Site.Taxonomies.topics }}
                        {{ range $key, $value := .Site.Taxonomies.topics }}
                        <a href="/topics{{ $data.Plural }}/{{ $key | urlize }}" class="btn btn-outline-info m-2">
                            {{ $key }}
                            <span class="badge bg-info">{{ len $value }}</span>
                        </a>

                    {{ end }}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{{ partial "footer.html" . }}
